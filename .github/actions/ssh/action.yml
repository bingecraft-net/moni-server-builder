name: ssh
description: configures bingecraft-net org ssh known_hosts and private key

inputs:
  SSH_KEY:
    description: ssh private key to install
    required: true

runs:
  using: composite
  steps:
    - name: install known_hosts
      run: |
        mkdir -p ~/.ssh
        echo nebula-blue.bingecraft.net ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIBf1ojhBcMtzuxZoupiBgzLWRaT7/kfKBIf1eRzWVs2o >> ~/.ssh/known_hosts
      shell: bash
    - name: install private key
      run: |
        SSH_KEY_FILE=~/.ssh/id_ed25519
        touch $SSH_KEY_FILE
        chmod 600 $SSH_KEY_FILE
        echo "${{ inputs.SSH_KEY }}" > $SSH_KEY_FILE
      shell: bash
